(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5821)}])},5821:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return b}});var o=a(5893),n=a(7294);function r(e){let{children:s}=e;return(0,o.jsxs)("div",{className:"mx-auto flex flex-col space-y-4",style:{backgroundColor:"#001E62"},children:[(0,o.jsx)("header",{className:"container sticky top-0 z-40"}),(0,o.jsx)("div",{children:(0,o.jsx)("main",{className:"flex w-full flex-1 flex-col overflow-hidden",children:s})})]})}var t=a(8122),l=a.n(t),i=a(5675),c=a.n(i),d=a(4740),m=a(4871),u=a.n(m);let _=e=>{let{color:s="#000",style:a="small"}=e;return(0,o.jsxs)("span",{className:"small"==a?u().loading2:u().loading,children:[(0,o.jsx)("span",{style:{backgroundColor:s}}),(0,o.jsx)("span",{style:{backgroundColor:s}}),(0,o.jsx)("span",{style:{backgroundColor:s}})]})};_.defaultProps={style:"small"};var g=a(1683),x=a(9307),h=a(6010),p=a(7851);function f(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,p.m)((0,h.W)(s))}let j=g.fC,v=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,o.jsx)(g.ck,{ref:s,className:f("border-b border-b-slate-200 dark:border-b-slate-700",a),...n})});v.displayName="AccordionItem";let w=n.forwardRef((e,s)=>{let{className:a,children:n,...r}=e;return(0,o.jsx)(g.h4,{className:"flex",children:(0,o.jsxs)(g.xz,{ref:s,className:f("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...r,children:[n,(0,o.jsx)(x.Z,{className:"h-4 w-4 transition-transform duration-200"})]})})});w.displayName=g.xz.displayName;let N=n.forwardRef((e,s)=>{let{className:a,children:n,...r}=e;return(0,o.jsx)(g.VY,{ref:s,className:f("data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up overflow-hidden text-sm transition-all",a),...r,children:(0,o.jsx)("div",{className:"pt-0 pb-4",children:n})})});function b(){let[e,s]=(0,n.useState)(""),[a,t]=(0,n.useState)(!1),[i,m]=(0,n.useState)(null),[u,g]=(0,n.useState)({messages:[{message:"Ol\xe1! Sou um rob\xf4 treinado sobre a CVM 175 e outros documentos. Fa\xe7a qualquer pergunta que reponderei incluindo refer\xeancias ao documento original!",type:"apiMessage"}],history:[]}),{messages:x,history:h}=u,p=(0,n.useRef)(null),f=(0,n.useRef)(null);async function b(a){if(a.preventDefault(),m(null),!e){alert("Por favor escreva uma pergunta");return}let o=e.trim();g(e=>({...e,messages:[...e.messages,{type:"userMessage",message:o}]})),t(!0),s("");try{var n;let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:o,history:h})}),s=await e.json();console.log("data",s),s.error?m(s.error):g(e=>({...e,messages:[...e.messages,{type:"apiMessage",message:s.text,sourceDocs:s.sourceDocuments}],history:[...e.history,[o,s.text]]})),console.log("messageState",u),t(!1),null===(n=p.current)||void 0===n||n.scrollTo(0,p.current.scrollHeight)}catch(e){t(!1),m("Ocorreu um erro obtendo dados. Por favor tente novamente."),console.log("error",e)}}(0,n.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.focus()},[]);let y=s=>{"Enter"===s.key&&e?b(s):"Enter"==s.key&&s.preventDefault()};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(r,{children:[(0,o.jsxs)("div",{className:"mx-auto flex flex-col gap-4",style:{color:"#FFFF"},children:[(0,o.jsx)("h1",{className:"text-2xl font-bold leading-[1.1] tracking-tighter text-center",children:"Converse com a CVM 175"}),(0,o.jsxs)("main",{className:l().main,children:[(0,o.jsx)("div",{className:l().cloud,children:(0,o.jsx)("div",{ref:p,className:l().messagelist,children:x.map((e,s)=>{let n,r;return"apiMessage"===e.type?(n=(0,o.jsx)(c(),{src:"/175bot-image.png",alt:"AI",width:"55",height:"55",className:l().boticon,priority:!0},s),r=l().apimessage):(n=(0,o.jsx)(c(),{src:"/175usericon.png",alt:"Me",width:"50",height:"50",className:l().usericon,priority:!0},s),r=a&&s===x.length-1?l().usermessagewaiting:l().usermessage),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:r,children:[n,(0,o.jsx)("div",{className:l().markdownanswer,children:(0,o.jsx)(d.D,{linkTarget:"_blank",children:e.message})})]},"chatMessage-".concat(s)),e.sourceDocs&&(0,o.jsx)("div",{className:"p-5",children:(0,o.jsx)(j,{type:"single",collapsible:!0,className:"flex-col",children:e.sourceDocs.map((e,s)=>(0,o.jsx)("div",{children:(0,o.jsxs)(v,{value:"item-".concat(s),children:[(0,o.jsx)(w,{children:(0,o.jsxs)("h3",{children:["Fonte ",s+1]})}),(0,o.jsxs)(N,{children:[(0,o.jsx)(d.D,{linkTarget:"_blank",children:e.pageContent}),(0,o.jsxs)("p",{className:"mt-2",children:[(0,o.jsx)("b",{children:"Fonte:"})," ",e.metadata.source]})]})]})},"messageSourceDocs-".concat(s)))})},"sourceDocsAccordion-".concat(s))]})})})}),(0,o.jsx)("div",{className:l().center,children:(0,o.jsx)("div",{className:l().cloudform,children:(0,o.jsxs)("form",{onSubmit:b,children:[(0,o.jsx)("textarea",{disabled:a,onKeyDown:y,ref:f,autoFocus:!1,rows:1,maxLength:512,id:"userInput",name:"userInput",placeholder:a?"Processando resposta...":"Explique fundos fechados.",value:e,onChange:e=>s(e.target.value),className:l().textarea}),(0,o.jsx)("button",{type:"submit",disabled:a,className:l().generatebutton,children:a?(0,o.jsx)("div",{className:l().loadingwheel,children:(0,o.jsx)(_,{color:"#000"})}):(0,o.jsx)("svg",{viewBox:"0 0 20 20",className:l().svgicon,xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})})}),i&&(0,o.jsx)("div",{className:"border border-red-400 rounded-md p-4",children:(0,o.jsx)("p",{className:"text-red-500",children:i})})]})]}),(0,o.jsx)("footer",{className:"m-auto p-4",style:{color:"#FFFF",backgroundColor:"#001E62"},children:(0,o.jsx)("a",{href:"https://www.linkedin.com/in/flpgdt/",children:"flpgdt@gmail.com - Powered by LangChainAI."})})]})})}N.displayName=g.VY.displayName},8122:function(e){e.exports={main:"Home_main__nLjiQ",header:"Home_header__GCVRv",cloudform:"Home_cloudform__W4PLJ",textarea:"Home_textarea__lSHf7",generatebutton:"Home_generatebutton__omKYX",loadingwheel:"Home_loadingwheel__IWJnE",svgicon:"Home_svgicon__PLaWz",messagelist:"Home_messagelist__YHr8p",messagelistloading:"Home_messagelistloading__tlCYV",usermessage:"Home_usermessage__tWHWR",usermessagewaiting:"Home_usermessagewaiting__PYv_4","loading-gradient":"Home_loading-gradient__8jpVG",apimessage:"Home_apimessage__VhfTn",fadein:"Home_fadein__CBLON",markdownanswer:"Home_markdownanswer__UUDfu",boticon:"Home_boticon__Xr0Q4",usericon:"Home_usericon___BrVD",center:"Home_center__4BFgC",cloud:"Home_cloud__S7par",pointsnormal:"Home_pointsnormal__yRwA_",pointsdim:"Home_pointsdim__x_zcw",footer:"Home_footer____T7K",topnav:"Home_topnav__BfkuW",navlogo:"Home_navlogo__AhPAx"}},4871:function(e){e.exports={loading:"loading-dots_loading__LomzL",spacer:"loading-dots_spacer__nBBvk",blink:"loading-dots_blink__yy72w",loading2:"loading-dots_loading2___zCAu"}}},function(e){e.O(0,[745,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);